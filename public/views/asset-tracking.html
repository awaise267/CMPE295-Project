<div class="container-fluid" style="margin:0 auto;">
    <div class="col-lg-12">
        <div class="row">
            <div class="col-lg-9">
                <input style="margin-bottom:5px;" id="searchTerm" class="form-control" type="text" ng-model="searchTerm" placeholder="Product id to search">
            </div>

            <div class="col-lg-3">
                <button type="button" class="btn btn-md btn-primary" ng-click="searchButtonClick()">Search</button>
                <button type="button" class="btn btn-md btn-primary" data-toggle="modal" data-target="#myModal">
                    Scan QR
                </button>
            </div>
        </div>
    </div>
    <div class="col-lg-12">
        <div class="row">

            <div class="col-lg-9">

                <h3>Product Tracking Visuals</h3>
                <div class="row">
                    <div class="col-lg-12">
                        <div map-lazy-load="https://maps.google.com/maps/api/js"
                             map-lazy-load-params="{{googleMapsUrl}}">
                            <ng-map center="41,-87" zoom="3" style="height:450px;"></ng-map>
                        </div>
                    </div>
                </div>
            </div>

            <div class="demo col-lg-3">
                <h3>Asset Tracking Log</h3>

                <ul class="progress-tracker progress-tracker--vertical">

                    <li ng-repeat="state in states track by $index" class="progress-step is-complete">
                        <span class="progress-marker"></span>
                        <span class="progress-text">
                             <div style="box-shadow: 10px 10px 5px #888888; max-width:220px;">
                            <h4 class="progress-title">Step {{$index + 1}}</h4>
                            <div ng-repeat="test in state.tests">
                                <ul class="featureList">
                                    <li ng-class="{ tick: test.expectedResult == test.actualResult, cross: test.expectedResult != test.actualResult }">
                                        &nbsp;&nbsp;&nbsp;{{test.objective}}
                                    </li>
                                </ul>

                            </div>
                             </div>
                        </span>
                    </li>
                    <!-- <li class="progress-step is-complete" >
          <span class="progress-marker"></span>
          <span class="progress-text">
          <h4 class="progress-title">Step 1</h4>
          Summary text explaining this step to the user
        </span>
      </li>
      <li class="progress-step is-complete">
      <span class="progress-marker"></span>
      <span class="progress-text">
      <h4 class="progress-title">Step 2</h4>
      Summary text explaining this step to the user
    </span>
  </li>
  <li class="progress-step is-active">
  <span class="progress-marker"></span>
  <span class="progress-text">
  <h4 class="progress-title">Step 3</h4>
  Summary text explaining this step to the user
</span>
</li>
<li class="progress-step">
<span class="progress-marker"></span>
<span class="progress-text">
<h4 class="progress-title">Step 4</h4>
Summary text explaining this step to the user
</span>
</li>
<li class="progress-step">
<span class="progress-marker"></span>
<span class="progress-text">
<h4 class="progress-title">Step 5</h4>
Summary text explaining this step to the user
</span>
</li> -->
                </ul>

            </div>
        </div>
    </div>


    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                </div>
                <div class="modal-body">
                    <div id="outdiv">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal -->
    <canvas id="qr-canvas" width="800" height="600" style="display:none; visibility:hidden"></canvas>
    <script type="text/javascript">
        function read(a)
        {
            var val = a;
            var splitPipes = val.split('|');
            console.log(splitPipes);
            var len = splitPipes.length;

            for(var i=0; i<len; i++){
                var splitEquals = splitPipes[i].split("=");
                var lhs = splitEquals[0].trim();
                var rhs =  splitEquals[1].trim();

                if(lhs === "productId")
                    document.getElementById("searchTerm").value = rhs;
            }

            $('#myModal').modal("hide");
        }
        load();
    </script>

</div>
